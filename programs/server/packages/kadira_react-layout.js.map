{"version":3,"sources":["meteor://ðŸ’»app/packages/kadira:react-layout/lib/react_layout.js"],"names":["ReactLayout","_domLoaded","_rootProps","_readyCallbacks","setRootProps","rootProps","_buildRootNode","props","id","el","React","createElement","html","renderToStaticMarkup","_getRootNode","rootNode","document","getElementById","rootNodeHtml","body","getElementsByTagName","insertAdjacentHTML","render","layoutClass","regions","Meteor","isClient","_renderClient","_renderServer","elHtml","renderToString","replace","Package","FlowRouter","ssrContext","get","setHtml","self","_ready","cb","push","startup","setTimeout","forEach","fn"],"mappings":"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","file":"/packages/kadira_react-layout.js","sourcesContent":["ReactLayout = {};\nReactLayout._domLoaded = false;\nReactLayout._rootProps = {};\nReactLayout._readyCallbacks = [];\n\nReactLayout.setRootProps = function(rootProps) {\n  this._rootProps = rootProps;\n};\n\nReactLayout._buildRootNode = function() {\n  var props = this._rootProps || {};\n  props.id = \"react-root\";\n  var el = React.createElement('div', props);\n  var html = React.renderToStaticMarkup(el);\n  return html;\n};\n\nReactLayout._getRootNode = function() {\n  var rootNode = document.getElementById('react-root');\n\n  if(rootNode) {\n    return rootNode;\n  } else {\n    var rootNodeHtml = this._buildRootNode();\n    var body = document.getElementsByTagName('body')[0];\n    body.insertAdjacentHTML('beforeend', rootNodeHtml);\n    rootNode = document.getElementById('react-root');\n    return rootNode;\n  }\n};\n\nReactLayout.render = function(layoutClass, regions) {\n  if(Meteor.isClient) {\n    return this._renderClient(layoutClass, regions);\n  } else {\n    return this._renderServer(layoutClass, regions);\n  }\n};\n\nReactLayout._renderServer = function(layoutClass, regions) {\n  var el = React.createElement(layoutClass, regions);\n  var elHtml = React.renderToString(el);\n\n  var rootNodeHtml = this._buildRootNode();\n  var html = rootNodeHtml.replace('</div>', elHtml + '</div>');\n\n  if(Package['kadira:flow-router-ssr']) {\n    var FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n    var ssrContext = FlowRouter.ssrContext.get();\n    ssrContext.setHtml(html);\n  }\n};\n\nReactLayout._renderClient = function(layoutClass, regions) {\n  var self = this;\n  this._ready(function() {\n    var rootNode = self._getRootNode();\n    var el = React.createElement(layoutClass, regions);\n    React.render(el, rootNode);\n  });\n};\n\nReactLayout._ready = function(cb) {\n  var self = this;\n  if(self._domLoaded) {\n    cb();\n  } else {\n    self._readyCallbacks.push(cb);\n  }\n};\n\n// wait for DOM is loading\nMeteor.startup(function() {\n  setTimeout(function() {\n    ReactLayout._domLoaded = true;\n    ReactLayout._readyCallbacks.forEach(function(fn) {\n      fn();\n    });\n  }, 10);\n});"]}